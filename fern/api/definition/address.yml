# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml

service:
  auth: true
  base-path: /v1/address
  endpoints:
    autocomplete:
      docs: Allows users to submit a piece of an address string and have the API respond with the best possible options
      path: "/autocomplete"
      method: POST
      request:
        name: AddressAutocompleteRequest
        body:
          properties:
            address:
              docs: A piece of an address string
              type: string
      response: AutocompleteResponse
      examples:
        - request:
            address: 500 7th Ave
          response:
            body:
              status: 200
              data: [$Prediction.Example1, $Prediction.Example2]
              message: You received two options to autocomplete your input
              errors: []
              endpoint: /v1/address/autocomplete

    parse:
      docs: Takes addresses in multiple different formats and returns the address in the PackageX address mode.
      path: "/parse"
      method: POST
      request:
        name: ParseAddressRequest
        body:
          properties:
            address: commons.Address
      response: ParseResponse
      examples:
        - request:
            address: "500 7th Ave, New York, NY"
          response:
            body:
              status: 200
              data: $commons.ParsedAddress.Example1
              message: You received the address in PackageX address mode
              errors: []
              endpoint: /v1/address/parse

types:
  ParseResponse:
    extends: commons.Response
    properties:
      data: commons.Address

  AutocompleteResponse:
    extends: commons.Response
    properties:
      data: list<Prediction>

  Prediction:
    docs: A prediction API has for address string input
    properties:
      address:
        docs: The full predicted address
        type: string
      matched_text:
        docs: The input given by user
        type: string
      autocomplete_text:
        docs: The text added by the API to provide prediction
        type: string
    examples:
      - name: Example1
        value:
          address: 500 7th Avenue, San Diego, CA, USA
          matched_text: 500 7th Avenue
          autocomplete_text: San Diego, CA, USA
      - name: Example2
        value:
          address: 500 7th Avenue, New York, NY, USA
          matched_text: 500 7th Avenue
          autocomplete_text: New York, NY, USA
